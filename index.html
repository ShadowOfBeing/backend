<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link type="text/css" href="css/styles.css" rel="stylesheet" />
    <script src="js/scripts.js"></script>
</head>
<body>
    <div class="main-container">
        <div class="rubrics-menu">
            <div class="title" id="category-title">
                Категории
                <img id="microphone" src="./img/microphone.png" alt="microphone" onclick="startRecognition()">
            </div>
            <div class="main-title main" onclick="getLayout('main')">Главная</div>
            <div class="main-title work" onclick="getLayout('work')">О работе</div>
            <div class="main-title other" onclick="getLayout('other')">Общее</div>
            <div class="main-title python" onclick="getLayout('python')">Python</div>
            <div class="main-title databases" onclick="getLayout('databases')">Базы данных, SQL</div>
            <div class="main-title oop" onclick="getLayout('oop')">ООП</div>
            <div class="main-title async" onclick="getLayout('async')">Асинхронность</div>
            <div class="main-title review" onclick="getLayout('review')">Code Review</div>
            <div class="main-title tests" onclick="getLayout('tests')">Тестирование</div>
            <div class="main-title django" onclick="getLayout('django')">Django</div>
            <div class="main-title git" onclick="getLayout('git')">Git</div>
            <div class="main-title docker" onclick="getLayout('docker')">Docker</div>
            <div class="main-title algorithms" onclick="getLayout('algorithms')">Алгоритмы</div>
            <div class="main-title linux" onclick="getLayout('linux')">Linux</div>
            <div class="main-title drf" onclick="getLayout('drf')">DRF</div>
            <div class="main-title brokers" onclick="getLayout('brokers')">Брокеры сообщений</div>
        </div>
        <div class="content-box">
            <div class="questions-menu">
                <div class="title">Каталог вопросов</div>
                <div class="questions-container"></div>
            </div>
            <div class="answer-and-question">
                <div class="title">Вопрос</div>
                <div class="question"></div>
                <div class="title">Ответ</div>
                <div class="answer"></div>
            </div>
        </div>
    </div>
    <script>
        var category = sessionStorage.getItem("category");

        if (!category || category == 'main') {
            // делаем категорию визуально выбранной
            document.getElementsByClassName('main')[0].classList.add('select');

            // удаляем контейнер для вопросов/ответов
            document.getElementsByClassName('content-box')[0].remove();

            // добавляем контент главной страницы
            document.getElementsByClassName('main-container')[0].innerHTML += mainText;
        } else {
            // заполняем список вопросов
            getQuestionsList(category);

            // делаем категорию визуально выбранной
            document.getElementsByClassName(category)[0].classList.add('select');

            // прописываем стиль последнему вопросу в списке
            var questions = document.getElementsByClassName('question-in-menu');
            var lastQuestion = questions[questions.length - 1];
            lastQuestion.classList.add("last-question");

            // заполняем первый вопрос и ответ
            getAnswer(category, 1);
        }

        // ГОЛОСОВЫЕ КОМАНДЫ
        const speechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new speechRecognition() // Создание объекта распознавания речи
        recognition.lang = "ru-RU"; // Установка языка распознавания
        recognition.interimResults = false; // Устанавливаем, чтобы результаты отображались только после завершения записи речи
        recognition.maxAlternatives = 1; // Устанавливаем максимальное число альтернатив распознавания

        // Обработчик события, вызываемый после завершения распознавания речи
        recognition.onresult = function(event) {
          const result = event.results[0][0].transcript; // Получаем распознанный текст

          runCommand(result);
          //alert(result); // Выводим распознанный текст в консоль
        };

        // Обработчик события, вызываемый при ошибке распознавания речи
        recognition.onerror = function(event) {
          alert(event.error); // Выводим ошибку в консоль
        };

        // Функция, которая запускает процесс распознавания речи
        function startRecognition() {
          recognition.start(); // Запуск распознавания речи
        }
    </script>
</body>
</html>